

### 7. é ˜åæ›¸ãƒ“ãƒ¥ãƒ¼ãƒ¯ãƒ¼

#### `components/approval/ReceiptViewer.tsx`
```typescript
'use client';

import { useState } from 'react';
import { Card } from '@/components/ui/card';
import { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';
import { Button } from '@/components/ui/button';
import { ExternalLink, ZoomIn } from 'lucide-react';

interface ReceiptViewerProps {
  receiptUrl: string;
  creditUrl?: string;
}

export function ReceiptViewer({ receiptUrl, creditUrl }: ReceiptViewerProps) {
  const [isZoomed, setIsZoomed] = useState(false);
  
  return (
    <Card className="p-6">
      <div className="flex items-center justify-between mb-4">
        <h3 className="text-lg font-semibold">ğŸ“· é ˜åæ›¸ãƒ»æ˜ç´°</h3>
        <Button
          variant="outline"
          size="sm"
          onClick={() => window.open(receiptUrl, '_blank')}
        >
          <ExternalLink className="h-4 w-4 mr-2" />
          æ–°ã—ã„ã‚¿ãƒ–ã§é–‹ã
        </Button>
      </div>
      
      <Tabs defaultValue="receipt" className="w-full">
        <TabsList className="grid w-full grid-cols-2">
          <TabsTrigger value="receipt">é ˜åæ›¸</TabsTrigger>
          <TabsTrigger value="credit" disabled={!creditUrl}>
            ã‚¯ãƒ¬ã‚«æ˜ç´° {!creditUrl && '(ãªã—)'}
          </TabsTrigger>
        </TabsList>
        
        <TabsContent value="receipt" className="mt-4">
          <div className="relative bg-gray-100 rounded-lg overflow-hidden">
            <img
              src={receiptUrl}
              alt="é ˜åæ›¸"
              className={`w-full h-auto cursor-zoom-in transition-transform ${
                isZoomed ? 'scale-150' : 'scale-100'
              }`}
              onClick={() => setIsZoomed(!isZoomed)}
            />
            {!isZoomed && (
              <div className="absolute bottom-4 right-4">
                <Button
                  variant="secondary"
                  size="sm"
                  onClick={() => setIsZoomed(true)}
                >
                  <ZoomIn className="h-4 w-4 mr-2" />
                  æ‹¡å¤§
                </Button>
              </div>
            )}
          </div>
        </TabsContent>
        
        {creditUrl && (
          <TabsContent value="credit" className="mt-4">
            <div className="relative bg-gray-100 rounded-lg overflow-hidden">
              <img
                src={creditUrl}
                alt="ã‚¯ãƒ¬ã‚«æ˜ç´°"
                className="w-full h-auto"
              />
            </div>
          </TabsContent>
        )}
      </Tabs>
    </Card>
  );
}
```

---

### 8. AIåˆ¤å®šã‚»ã‚¯ã‚·ãƒ§ãƒ³

#### `components/approval/AICheckSection.tsx`
```typescript
import { Card } from '@/components/ui/card';
import { AICheckResult } from '@/lib/types';
import { AIRiskBadge } from '@/components/shared/AIRiskBadge';
import { formatCurrency, formatDate } from '@/lib/utils';
import { CheckCircle2, XCircle, AlertTriangle } from 'lucide-react';

interface AICheckSectionProps {
  result: AICheckResult;
}

export function AICheckSection({ result }: AICheckSectionProps) {
  return (
    <Card className="p-6">
      <div className="flex items-center justify-between mb-4">
        <h3 className="text-lg font-semibold">ğŸ¤– AIè‡ªå‹•ãƒã‚§ãƒƒã‚¯çµæœ</h3>
        <AIRiskBadge riskLevel={result.riskLevel} />
      </div>
      
      <div className="space-y-4">
        {/* é ˜åæ›¸ã‹ã‚‰èª­ã¿å–ã£ãŸå†…å®¹ */}
        <div>
          <div className="text-sm font-medium text-gray-700 mb-2">
            é ˜åæ›¸ã‹ã‚‰èª­ã¿å–ã£ãŸå†…å®¹:
          </div>
          <div className="bg-gray-50 rounded-lg p-4 space-y-2 text-sm">
            <div className="flex justify-between">
              <span className="text-gray-600">é‡‘é¡:</span>
              <span className="font-medium">{formatCurrency(result.extractedAmount)}</span>
            </div>
            <div className="flex justify-between">
              <span className="text-gray-600">ç™ºè¡Œæ—¥:</span>
              <span className="font-medium">{formatDate(result.extractedDate)}</span>
            </div>
            <div className="flex justify-between">
              <span className="text-gray-600">åº—åãƒ»ã‚µãƒ¼ãƒ“ã‚¹:</span>
              <span className="font-medium">{result.extractedVendor}</span>
            </div>
          </div>
        </div>
        
        {/* æ•´åˆæ€§ãƒã‚§ãƒƒã‚¯ */}
        <div>
          <div className="text-sm font-medium text-gray-700 mb-2">
            æ•´åˆæ€§ãƒã‚§ãƒƒã‚¯:
          </div>
          <div className="space-y-2">
            <CheckItem
              label="ç”³è«‹é‡‘é¡ã¨ã®ä¸€è‡´"
              isMatch={result.amountMatch}
            />
            <CheckItem
              label="å¯¾è±¡æœˆå†…ã®æ—¥ä»˜"
              isMatch={result.dateMatch}
            />
            <CheckItem
              label="ãƒ„ãƒ¼ãƒ«åã®ä¸€è‡´"
              isMatch={result.vendorMatch}
            />
          </div>
        </div>
        
        {/* æ¤œå‡ºäº‹é … */}
        {result.findings.length > 0 && (
          <div>
            <div className="text-sm font-medium text-gray-700 mb-2">
              æ¤œå‡ºäº‹é …:
            </div>
            <ul className="space-y-1">
              {result.findings.map((finding, index) => (
                <li key={index} className="text-sm text-gray-600 flex items-start gap-2">
                  <span className="text-yellow-600 mt-0.5">â€¢</span>
                  <span>{finding}</span>
                </li>
              ))}
            </ul>
          </div>
        )}
        
        {/* AIæ¨å¥¨ */}
        <div className="bg-blue-50 border border-blue-200 rounded-lg p-4">
          <div className="text-sm font-medium text-blue-900 mb-1">
            AIæ¨å¥¨:
          </div>
          <div className="text-sm text-blue-700">
            {result.recommendation}
          </div>
        </div>
        
        {/* ä¿¡é ¼åº¦ */}
        <div className="text-xs text-gray-500 text-right">
          ä¿¡é ¼åº¦: {Math.round(result.confidence * 100)}%
        </div>
      </div>
    </Card>
  );
}

function CheckItem({ label, isMatch }: { label: string; isMatch: boolean }) {
  return (
    <div className="flex items-center gap-2 text-sm">
      {isMatch ? (
        <>
          <CheckCircle2 className="h-4 w-4 text-green-600" />
          <span className="text-green-700">{label}</span>
        </>
      ) : (
        <>
          <XCircle className="h-4 w-4 text-red-600" />
          <span className="text-red-700">{label}</span>
        </>
      )}
    </div>
  );
}
```

---

### 9. çµŒç†ãƒã‚§ãƒƒã‚¯ãƒ•ã‚©ãƒ¼ãƒ 

#### `components/approval/AccountingCheckForm.tsx`
```typescript
'use client';

import { useState } from 'react';
import { Card } from '@/components/ui/card';
import { Button } from '@/components/ui/button';
import { Textarea } from '@/components/ui/textarea';
import { Checkbox } from '@/components/ui/checkbox';
import { useCheckSubmit } from '@/hooks/useCheckSubmit';
import { Application } from '@/lib/types';
import { CheckCircle2, XCircle, UserCog } from 'lucide-react';
import { LoadingSpinner } from '@/components/shared/LoadingSpinner';

interface AccountingCheckFormProps {
  application: Application;
  onSubmitted: () => void;
}

export function AccountingCheckForm({ application, onSubmitted }: AccountingCheckFormProps) {
  const [receiptChecked, setReceiptChecked] = useState(false);
  const [contentChecked, setContentChecked] = useState(false);
  const [comment, setComment] = useState('');
  
  const { submit, isSubmitting } = useCheckSubmit();
  
  const canApprove = receiptChecked && contentChecked;
  
  const handleSubmit = async (action: 'accounting_approve' | 'accounting_reject' | 'send_to_executive') => {
    try {
      await submit({
        applicationId: application.applicationId,
        action,
        checker: 'çµŒç†æ‹…å½“è€…', // å®Ÿéš›ã¯èªè¨¼æƒ…å ±ã‹ã‚‰å–å¾—
        comment: comment || undefined,
      });
      
      // ãƒªã‚»ãƒƒãƒˆ
      setReceiptChecked(false);
      setContentChecked(false);
      setComment('');
      
      onSubmitted();
    } catch (error) {
      console.error('Check submission failed:', error);
      alert('ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ');
    }
  };
  
  // ã™ã§ã«ãƒã‚§ãƒƒã‚¯æ¸ˆã¿ã®å ´åˆ
  if (application.checkStatus !== 'æœªç¢ºèª') {
    return (
      <Card className="p-6">
        <h3 className="text-lg font-semibold mb-4">ğŸ‘” çµŒç†ãƒã‚§ãƒƒã‚¯</h3>
        <div className="bg-gray-50 rounded-lg p-4 space-y-2 text-sm">
          <div className="flex justify-between">
            <span className="text-gray-600">æ‹…å½“è€…:</span>
            <span className="font-medium">{application.accountingChecker || '-'}</span>
          </div>
          <div className="flex justify-between">
            <span className="text-gray-600">ç¢ºèªæ—¥:</span>
            <span className="font-medium">{application.accountingCheckDate || '-'}</span>
          </div>
          {application.accountingComment && (
            <div>
              <div className="text-gray-600 mb-1">ã‚³ãƒ¡ãƒ³ãƒˆ:</div>
              <div className="font-medium">{application.accountingComment}</div>
            </div>
          )}
        </div>
      </Card>
    );
  }
  
  return (
    <Card className="p-6">
      <h3 className="text-lg font-semibold mb-4">ğŸ‘” çµŒç†ãƒã‚§ãƒƒã‚¯</h3>
      
      <div className="space-y-4">
        {/* ãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ */}
        <div className="space-y-3">
          <div className="flex items-center space-x-2">
            <Checkbox
              id="receipt-check"
              checked={receiptChecked}
              onCheckedChange={(checked) => setReceiptChecked(checked as boolean)}
            />
            <label
              htmlFor="receipt-check"
              className="text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"
            >
              é ˜åæ›¸ã‚’ç¢ºèªã—ã¾ã—ãŸ
            </label>
          </div>
          
          <div className="flex items-center space-x-2">
            <Checkbox
              id="content-check"
              checked={contentChecked}
              onCheckedChange={(checked) => setContentChecked(checked as boolean)}
            />
            <label
              htmlFor="content-check"
              className="text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"
            >
              é‡‘é¡ãƒ»å†…å®¹ãŒé©åˆ‡ã§ã™
            </label>
          </div>
        </div>
        
        {/* ã‚³ãƒ¡ãƒ³ãƒˆæ¬„ */}
        <div>
          <label className="text-sm font-medium text-gray-700 mb-2 block">
            ã‚³ãƒ¡ãƒ³ãƒˆï¼ˆä»»æ„ï¼‰
          </label>
          <Textarea
            placeholder="ç‰¹è¨˜äº‹é …ãŒã‚ã‚Œã°å…¥åŠ›ã—ã¦ãã ã•ã„..."
            value={comment}
            onChange={(e) => setComment(e.target.value)}
            rows={3}
          />
        </div>
        
        {/* ãƒœã‚¿ãƒ³ */}
        <div className="flex gap-2">
          <Button
            onClick={() => handleSubmit('accounting_approve')}
            disabled={!canApprove || isSubmitting}
            className="flex-1 bg-green-600 hover:bg-green-700"
          >
            {isSubmitting ? (
              <LoadingSpinner className="mr-2" />
            ) : (
              <CheckCircle2 className="h-4 w-4 mr-2" />
            )}
            çµŒç†æ‰¿èª
          </Button>
          
          <Button
            onClick={() => handleSubmit('accounting_reject')}
            disabled={isSubmitting}
            variant="destructive"
            className="flex-1"
          >
            {isSubmitting ? (
              <LoadingSpinner className="mr-2" />
            ) : (
              <XCircle className="h-4 w-4 mr-2" />
            )}
            å·®ã—æˆ»ã—
          </Button>
          
          <Button
            onClick={() => handleSubmit('send_to_executive')}
            disabled={isSubmitting}
            variant="outline"
            className="flex-1"
          >
            {isSubmitting ? (
              <LoadingSpinner className="mr-2" />
            ) : (
              <UserCog className="h-4 w-4 mr-2" />
            )}
            å½¹å“¡ã¸å›ã™
          </Button>
        </div>
      </div>
    </Card>
  );
}
```

---

### 10. å½¹å“¡ãƒã‚§ãƒƒã‚¯ãƒ•ã‚©ãƒ¼ãƒ 

#### `components/approval/ExecutiveCheckForm.tsx`
```typescript
'use client';

import { useState } from 'react';
import { Card } from '@/components/ui/card';
import { Button } from '@/components/ui/button';
import { Textarea } from '@/components/ui/textarea';
import { useCheckSubmit } from '@/hooks/useCheckSubmit';
import { Application } from '@/lib/types';
import { CheckCircle2, XCircle } from 'lucide-react';
import { LoadingSpinner } from '@/components/shared/LoadingSpinner';

interface ExecutiveCheckFormProps {
  application: Application;
  onSubmitted: () => void;
}

export function ExecutiveCheckForm({ application, onSubmitted }: ExecutiveCheckFormProps) {
  const [comment, setComment] = useState('');
  const { submit, isSubmitting } = useCheckSubmit();
  
  const handleSubmit = async (action: 'executive_approve' | 'executive_reject') => {
    try {
      await submit({
        applicationId: application.applicationId,
        action,
        checker: 'å½¹å“¡', // å®Ÿéš›ã¯èªè¨¼æƒ…å ±ã‹ã‚‰å–å¾—
        comment: comment || undefined,
      });
      
      setComment('');
      onSubmitted();
    } catch (error) {
      console.error('Executive check failed:', error);
      alert('ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ');
    }
  };
  
  return (
    <div className="space-y-4">
      {/* çµŒç†ã‚³ãƒ¡ãƒ³ãƒˆã®è¡¨ç¤º */}
      <Card className="p-6 bg-blue-50 border-blue-200">
        <h3 className="text-lg font-semibold mb-2 text-blue-900">ğŸ‘” çµŒç†ã‹ã‚‰ã®ä¾é ¼</h3>
        <div className="text-sm text-blue-800">
          <div className="mb-2">
            <span className="font-medium">æ‹…å½“è€…:</span> {application.accountingChecker}
          </div>
          <div>
            <span className="font-medium">ã‚³ãƒ¡ãƒ³ãƒˆ:</span>
          </div>
          <div className="mt-1 bg-white rounded p-3">
            {application.accountingComment || 'ï¼ˆã‚³ãƒ¡ãƒ³ãƒˆãªã—ï¼‰'}
          </div>
        </div>
      </Card>
      
      {/* å½¹å“¡åˆ¤æ–­ãƒ•ã‚©ãƒ¼ãƒ  */}
      <Card className="p-6">
        <h3 className="text-lg font-semibold mb-4">ğŸ‘‘ å½¹å“¡ç¢ºèª</h3>
        
        <div className="space-y-4">
          <div>
            <label className="text-sm font-medium text-gray-700 mb-2 block">
              ã‚³ãƒ¡ãƒ³ãƒˆï¼ˆä»»æ„ï¼‰
            </label>
            <Textarea
              placeholder="åˆ¤æ–­ç†ç”±ã‚„è£œè¶³äº‹é …ãŒã‚ã‚Œã°å…¥åŠ›ã—ã¦ãã ã•ã„..."
              value={comment}
              onChange={(e) => setComment(e.target.value)}
              rows={3}
            />
          </div>
          
          <div className="flex gap-2">
            <Button
              onClick={() => handleSubmit('executive_approve')}
              disabled={isSubmitting}
              className="flex-1 bg-green-600 hover:bg-green-700"
            >
              {isSubmitting ? (
                <LoadingSpinner className="mr-2" />
              ) : (
                <CheckCircle2 className="h-4 w-4 mr-2" />
              )}
              æœ€çµ‚æ‰¿èª
            </Button>
            
            <Button
              onClick={() => handleSubmit('executive_reject')}
              disabled={isSubmitting}
              variant="destructive"
              className="flex-1"
            >
              {isSubmitting ? (
                <LoadingSpinner className="mr-2" />
              ) : (
                <XCircle className="h-4 w-4 mr-2" />
              )}
              å´ä¸‹
            </Button>
          </div>
        </div>
      </Card>
    </div>
  );
}
```

---

### 11. å…±é€šã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ

#### `components/shared/StatusBadge.tsx`
```typescript
import { CheckStatus } from '@/lib/types';
import { CHECK_STATUS_COLORS } from '@/lib/constants';
import { cn } from '@/lib/utils';

interface StatusBadgeProps {
  status: CheckStatus;
  className?: string;
}

export function StatusBadge({ status, className }: StatusBadgeProps) {
  return (
    <span
      className={cn(
        'inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium border',
        CHECK_STATUS_COLORS[status],
        className
      )}
    >
      {status}
    </span>
  );
}
```

#### `components/shared/AIRiskBadge.tsx`
```typescript
import { AIRiskLevel } from '@/lib/types';
import { AI_RISK_COLORS, AI_RISK_LABELS } from '@/lib/constants';
import { cn } from '@/lib/utils';

interface AIRiskBadgeProps {
  riskLevel: AIRiskLevel;
  compact?: boolean;
  className?: string;
}

export function AIRiskBadge({ riskLevel, compact = false, className }: AIRiskBadgeProps) {
  return (
    <span
      className={cn(
        'inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium border',
        AI_RISK_COLORS[riskLevel],
        className
      )}
    >
      {compact ? riskLevel : AI_RISK_LABELS[riskLevel]}
    </span>
  );
}
```

#### `components/shared/LoadingSpinner.tsx`
```typescript
import { Loader2 } from 'lucide-react';
import { cn } from '@/lib/utils';

interface LoadingSpinnerProps {
  className?: string;
  size?: 'sm' | 'md' | 'lg';
}

export function LoadingSpinner({ className, size = 'md' }: LoadingSpinnerProps) {
  const sizeClasses = {
    sm: 'h-4 w-4',
    md: 'h-6 w-6',
    lg: 'h-8 w-8',
  };
  
  return (
    <Loader2 className={cn('animate-spin', sizeClasses[size], className)} />
  );
}
```

#### `components/shared/EmptyState.tsx`
```typescript
interface EmptyStateProps {
  icon: string;
  title: string;
  description: string;
}

export function EmptyState({ icon, title, description }: EmptyStateProps) {
  return (
    <div className="text-center py-12">
      <div className="text-6xl mb-4">{icon}</div>
      <h3 className="text-lg font-semibold text-gray-900 mb-2">{title}</h3>
      <p className="text-sm text-gray-600">{description}</p>
    </div>
  );
}
```

---

### 12. ã‚«ã‚¹ã‚¿ãƒ ãƒ•ãƒƒã‚¯

#### `hooks/useApplications.ts`
```typescript
'use client';

import { useState, useEffect } from 'react';
import { Application } from '@/lib/types';
import { getApplications } from '@/lib/gasApi';

export function useApplications(targetMonth: string) {
  const [applications, setApplications] = useState<Application[]>([]);
  const [isLoading, setIsLoading] = useState(true);
  const [error, setError] = useState<Error | null>(null);
  
  const fetchApplications = async () => {
    try {
      setIsLoading(true);
      setError(null);
      const data = await getApplications(targetMonth);
      setApplications(data);
    } catch (err) {
      setError(err as Error);
    } finally {
      setIsLoading(false);
    }
  };
  
  useEffect(() => {
    fetchApplications();
  }, [targetMonth]);
  
  return {
    applications,
    isLoading,
    error,
    refetch: fetchApplications,
  };
}
```

#### `hooks/useCheckSubmit.ts`
```typescript
'use client';

import { useState } from 'react';
import { CheckSubmitPayload } from '@/lib/types';
import { submitCheck } from '@/lib/gasApi';

export function useCheckSubmit() {
  const [isSubmitting, setIsSubmitting] = useState(false);
  
  const submit = async (payload: CheckSubmitPayload) => {
    setIsSubmitting(true);
    try {
      await submitCheck(payload);
    } finally {
      setIsSubmitting(false);
    }
  };
  
  return {
    submit,
    isSubmitting,
  };
}
```

---

### 13. GAS API ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆï¼ˆå®Œå…¨ç‰ˆï¼‰

#### `lib/gasApi.ts`
```typescript
import { Application, CheckSubmitPayload } from './types';

const GAS_URL = process.env.NEXT_PUBLIC_GAS_API_URL!;

if (!GAS_URL) {
  throw new Error('NEXT_PUBLIC_GAS_API_URL is not defined');
}

export class GASApiError extends Error {
  constructor(
    message: string,
    public statusCode?: number,
    public gasError?: string
  ) {
    super(message);
    this.name = 'GASApiError';
  }
}

async function fetchGAS(params: Record<string, string>): Promise<any> {
  const url = new URL(GAS_URL);
  Object.entries(params).forEach(([key, value]) => {
    if (value !== undefined && value !== null) {
      url.searchParams.append(key, String(value));
    }
  });

  const response = await fetch(url.toString(), {
    method: 'GET',
    headers: {
      'Content-Type': 'application/json',
    },
  });

  if (!response.ok) {
    throw new GASApiError('GAS API request failed', response.status);
  }

  const data = await response.json();

  if (!data.success) {
    throw new GASApiError(data.message || 'Unknown error', undefined, data.message);
  }

  return data;
}

// ============================================
// ç”³è«‹ãƒ‡ãƒ¼ã‚¿å–å¾—
// ============================================

export async function getApplications(targetMonth?: string): Promise<Application[]> {
  const params: Record<string, string> = {
    action: 'api',
    method: 'getApplications',
  };

  if (targetMonth) {
    params.month = targetMonth;
  }

  const data = await fetchGAS(params);
  return data.data || [];
}

// ============================================
// ãƒã‚§ãƒƒã‚¯é€ä¿¡
// ============================================

export async function submitCheck(payload: CheckSubmitPayload): Promise<void> {
  const params: Record<string, string> = {
    action: 'api',
    method: 'submitCheck',
    applicationId: payload.applicationId,
    checkAction: payload.action,
    checker: payload.checker,
  };

  if (payload.comment) {
    params.comment = payload.comment;
  }

  await fetchGAS(params);
}

// ============================================
// ç”»åƒå–å¾—ï¼ˆBase64ï¼‰
// ============================================

export async function getImageBase64(fileId: string): Promise<string> {
  const params = {
    action: 'api',
    method: 'getImageBase64',
    fileId,
  };

  const data = await fetchGAS(params);
  return data.base64;
}
```

---

### 14. AIè‡ªå‹•ãƒã‚§ãƒƒã‚¯

#### `lib/aiChecker.ts`
```typescript
import Anthropic from '@anthropic-ai/sdk';
import { AICheckResult } from './types';

const anthropic = new Anthropic({
  apiKey: process.env.ANTHROPIC_API_KEY!,
});

export async function checkReceipt(
  receiptImageBase64: string,
  applicationData: {
    tool: string;
    amount: number;
    targetMonth: string;
    purpose: string;
  }
): Promise<AICheckResult> {
  const startTime = Date.now();
  
  try {
    const message = await anthropic.messages.create({
      model: 'claude-sonnet-4-20250514',
      max_tokens: 2048,
      messages: [
        {
          role: 'user',
          content: [
            {
              type: 'image',
              source: {
                type: 'base64',
                media_type: 'image/jpeg',
                data: receiptImageBase64,
              },
            },
            {
              type: 'text',
              text: `ã‚ãªãŸã¯çµŒç†æ‹…å½“è€…ã®ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆã§ã™ã€‚ã“ã®é ˜åæ›¸ã‚’åˆ†æã—ã¦ã€ç”³è«‹å†…å®¹ã¨æ•´åˆæ€§ã‚’ãƒã‚§ãƒƒã‚¯ã—ã¦ãã ã•ã„ã€‚

ã€ç”³è«‹å†…å®¹ã€‘
- ãƒ„ãƒ¼ãƒ«å: ${applicationData.tool}
- ç”³è«‹é‡‘é¡: Â¥${applicationData.amount.toLocaleString()}
- å¯¾è±¡æœˆ: ${applicationData.targetMonth}
- ä½¿ç”¨ç›®çš„: ${applicationData.purpose}

ã€ãƒã‚§ãƒƒã‚¯é …ç›®ã€‘
1. é ˜åæ›¸ã‹ã‚‰é‡‘é¡ã‚’èª­ã¿å–ã‚‹
2. é ˜åæ›¸ã®ç™ºè¡Œæ—¥ã‚’èª­ã¿å–ã‚‹
3. æ”¯æ‰•å…ˆï¼ˆåº—åãƒ»ã‚µãƒ¼ãƒ“ã‚¹åï¼‰ã‚’èª­ã¿å–ã‚‹
4. ç”³è«‹é‡‘é¡ã¨é ˜åæ›¸ã®é‡‘é¡ãŒä¸€è‡´ã™ã‚‹ã‹
5. ç™ºè¡Œæ—¥ãŒå¯¾è±¡æœˆå†…ã‹
6. ãƒ„ãƒ¼ãƒ«åã¨æ”¯æ‰•å…ˆãŒä¸€è‡´ã™ã‚‹ã‹ï¼ˆå®Œå…¨ä¸€è‡´ã§ãªãã¦ã‚‚ã€é–¢é€£æ€§ãŒã‚ã‚Œã°OKï¼‰
7. ä¸å¯©ç‚¹ã‚„æ³¨æ„äº‹é …ã¯ã‚ã‚‹ã‹

ä»¥ä¸‹ã®JSONå½¢å¼ã§å›ç­”ã—ã¦ãã ã•ã„ï¼ˆJSONä»¥å¤–ã¯å‡ºåŠ›ã—ãªã„ã§ãã ã•ã„ï¼‰ï¼š
{
  "extractedAmount": æ•°å€¤,
  "extractedDate": "YYYY-MM-DD",
  "extractedVendor": "åº—åã¾ãŸã¯ã‚µãƒ¼ãƒ“ã‚¹å",
  "amountMatch": true/false,
  "dateMatch": true/false,
  "vendorMatch": true/false,
  "riskLevel": "OK" | "WARNING" | "ERROR",
  "findings": ["æ¤œå‡ºäº‹é …1", "æ¤œå‡ºäº‹é …2"],
  "recommendation": "æ‰¿èªå¯å¦ã®æ¨å¥¨",
  "confidence": 0.0ã€œ1.0ã®æ•°å€¤
}

ã€åˆ¤å®šåŸºæº–ã€‘
- riskLevel: "OK" = å…¨ã¦å•é¡Œãªã—ã€"WARNING" = è»½å¾®ãªä¸ä¸€è‡´ã‚ã‚Šã€"ERROR" = é‡å¤§ãªä¸ä¸€è‡´ã‚ã‚Š
- findings: æ¤œå‡ºã—ãŸäº‹é …ã‚’ç®‡æ¡æ›¸ãã§ï¼ˆå•é¡ŒãŒãªã‘ã‚Œã°ç©ºé…åˆ—ï¼‰
- recommendation: "æ‰¿èªå¯" ã¾ãŸã¯ "è¦ç¢ºèª" ã¾ãŸã¯ "å´ä¸‹æ¨å¥¨"
- confidence: AIã®åˆ¤å®šã«å¯¾ã™ã‚‹ä¿¡é ¼åº¦ï¼ˆ0.0ã€œ1.0ï¼‰`,
            },
          ],
        },
      ],
    });

    const resultText = message.content[0].type === 'text' ? message.content[0].text : '';
    
    // JSONã®ã¿ã‚’æŠ½å‡ºï¼ˆãƒãƒ¼ã‚¯ãƒ€ã‚¦ãƒ³ã®ã‚³ãƒ¼ãƒ‰ãƒ–ãƒ­ãƒƒã‚¯ã‚’å‰Šé™¤ï¼‰
    const jsonMatch = resultText.match(/\{[\s\S]*\}/);
    if (!jsonMatch) {
      throw new Error('AI response does not contain valid JSON');
    }
    
    const result: AICheckResult = JSON.parse(jsonMatch[0]);
    
    // å‡¦ç†æ™‚é–“ã‚’è¿½åŠ 
    result.processingTime = Date.now() - startTime;
    
    return result;
    
  } catch (error) {
    console.error('AI check failed:', error);
    
    // ã‚¨ãƒ©ãƒ¼æ™‚ã®ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯
    return {
      extractedAmount: 0,
      extractedDate: '',
      extractedVendor: '',
      amountMatch: false,
      dateMatch: false,
      vendorMatch: false,
      riskLevel: 'ERROR',
      findings: ['AIå‡¦ç†ä¸­ã«ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ'],
      recommendation: 'æ‰‹å‹•ç¢ºèªãŒå¿…è¦ã§ã™',
      confidence: 0,
      processingTime: Date.now() - startTime,
    };
  }
}

export async function fetchImageAsBase64(driveUrl: string): Promise<string> {
  // Google Drive URLã‹ã‚‰ãƒ•ã‚¡ã‚¤ãƒ«IDã‚’æŠ½å‡º
  const fileIdMatch = driveUrl.match(/[-\w]{25,}/);
  if (!fileIdMatch) {
    throw new Error('Invalid Google Drive URL');
  }
  
  const fileId = fileIdMatch[0];
  
  // GASå´ã§Base64å¤‰æ›ã—ã¦è¿”ã™APIã‚’å©ã
  const response = await fetch(
    `${process.env.NEXT_PUBLIC_GAS_API_URL}?action=api&method=getImageBase64&fileId=${fileId}`
  );
  
  if (!response.ok) {
    throw new Error('Failed to fetch image');
  }
  
  const data = await response.json();
  
  if (!data.success) {
    throw new Error(data.message || 'Failed to get image Base64');
  }
  
  return data.base64;
}
```

---

### 15. ãƒ•ã‚©ãƒ¼ãƒãƒƒã‚¿ãƒ¼ï¼ˆå®Œå…¨ç‰ˆï¼‰

#### `lib/formatters.ts`
```typescript
import { Application } from './types';

export function exportToCSV(applications: Application[]): string {
  const headers = [
    'ç”³è«‹ID',
    'ç”³è«‹æ—¥',
    'ç¤¾å“¡ç•ªå·',
    'æ°å',
    'æ‹ ç‚¹',
    'ãƒ„ãƒ¼ãƒ«',
    'é‡‘é¡',
    'å¯¾è±¡æœˆ',
    'ä½¿ç”¨ç›®çš„',
    'AIåˆ¤å®š',
    'ãƒã‚§ãƒƒã‚¯ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹',
    'çµŒç†æ‹…å½“',
    'çµŒç†ã‚³ãƒ¡ãƒ³ãƒˆ',
    'å½¹å“¡',
    'å½¹å“¡ã‚³ãƒ¡ãƒ³ãƒˆ',
  ];

  const rows = applications.map(app => [
    app.applicationId,
    app.applicationDate,
    app.employeeNumber,
    app.employeeName,
    app.location,
    app.tool,
    app.amount,
    app.targetMonth,
    `"${app.purpose.replace(/"/g, '""')}"`, // CSVã‚¨ã‚¹ã‚±ãƒ¼ãƒ—
    app.aiRiskLevel || '',
    app.checkStatus,
    app.accountingChecker || '',
    `"${(app.accountingComment || '').replace(/"/g, '""')}"`,
    app.executiveApprover || '',
    `"${(app.executiveComment || '').replace(/"/g, '""')}"`,
  ]);

  const csvContent = [
    headers.join(','),
    ...rows.map(row => row.join(',')),
  ].join('\n');

  // BOMä»˜ãUTF-8ã§ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ï¼ˆExcelã§æ–‡å­—åŒ–ã‘ã—ãªã„ã‚ˆã†ã«ï¼‰
  return '\uFEFF' + csvContent;
}
```

---

### 16. API Routes

#### `app/api/ai-check/route.ts`
```typescript
import { NextRequest, NextResponse } from 'next/server';
import { checkReceipt, fetchImageAsBase64 } from '@/lib/aiChecker';

export async function POST(request: NextRequest) {
  try {
    const body = await request.json();
    
    const { receiptUrl, tool, amount, targetMonth, purpose } = body;
    
    if (!receiptUrl || !tool || !amount || !targetMonth) {
      return NextResponse.json(
        { success: false, message: 'Missing required fields' },
        { status: 400 }
      );
    }
    
    // ç”»åƒã‚’Base64ã«å¤‰æ›
    const imageBase64 = await fetchImageAsBase64(receiptUrl);
    
    // AIè‡ªå‹•ãƒã‚§ãƒƒã‚¯å®Ÿè¡Œ
    const result = await checkReceipt(imageBase64, {
      tool,
      amount,
      targetMonth,
      purpose,
    });
    
    return NextResponse.json({
      success: true,
      data: result,
    });
    
  } catch (error) {
    console.error('AI check API error:', error);
    return NextResponse.json(
      { success: false, message: error instanceof Error ? error.message : 'Unknown error' },
      { status: 500 }
    );
  }
}
```

---

### 17. GASå´ã®è¿½åŠ ã‚³ãƒ¼ãƒ‰

#### `code.gs`ï¼ˆè¿½åŠ éƒ¨åˆ†ï¼‰
```javascript
// ============================================
// APIç”¨ã®doGetæ‹¡å¼µ
// ============================================

function doGet(e) {
  const action = e.parameter.action;
  
  // APIç”¨ã®ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ
  if (action === 'api') {
    const method = e.parameter.method;
    
    switch(method) {
      case 'getApplications':
        return apiGetApplications(e.parameter.month);
      
      case 'submitCheck':
        return apiSubmitCheck(e.parameter);
      
      case 'getImageBase64':
        return apiGetImageBase64(e.parameter.fileId);
      
      default:
        return apiError('Invalid method');
    }
  }
  
  // æ—¢å­˜ã®HTMLè¡¨ç¤ºå‡¦ç†ï¼ˆãã®ã¾ã¾ï¼‰
  return existingPageDisplay(e);
}

// ============================================
// API: ç”³è«‹ä¸€è¦§å–å¾—
// ============================================

function apiGetApplications(targetMonth) {
  try {
    const apps = getAllApplicationsByMonth(targetMonth); // æ—¢å­˜é–¢æ•°ã‚’æµç”¨
    
    return ContentService
      .createTextOutput(JSON.stringify({ 
        success: true, 
        data: apps 
      }))
      .setMimeType(ContentService.MimeType.JSON);
      
  } catch (error) {
    return apiError(error.toString());
  }
}

// ============================================
// API: ãƒã‚§ãƒƒã‚¯é€ä¿¡
// ============================================

function apiSubmitCheck(params) {
  try {
    const applicationId = params.applicationId;
    const action = params.checkAction;
    const checker = params.checker;
    const comment = params.comment || '';
    
    const ss = SpreadsheetApp.openById(SPREADSHEET_ID);
    const sheet = ss.getSheetByName(SHEET_NAMES.APPLICATION);
    const data = sheet.getDataRange().getValues();
    
    // å¯¾è±¡è¡Œã‚’æ¤œç´¢
    let targetRow = -1;
    for (let i = 1; i < data.length; i++) {
      if (data[i][0] == applicationId) {
        targetRow = i + 1;
        break;
      }
    }
    
    if (targetRow == -1) {
      return apiError('Application not found');
    }
    
    const now = new Date();
    
    // ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã«å¿œã˜ã¦æ›´æ–°
    switch(action) {
      case 'accounting_approve':
        // çµŒç†æ‰¿èª
        sheet.getRange(targetRow, 16).setValue('çµŒç†æ‰¿èªæ¸ˆ'); // checkStatus
        sheet.getRange(targetRow, 19).setValue(checker);      // accountingChecker
        sheet.getRange(targetRow, 20).setValue(now);          // accountingCheckDate
        sheet.getRange(targetRow, 21).setValue(comment);      // accountingComment
        break;
        
      case 'accounting_reject':
        // å·®ã—æˆ»ã—
        sheet.getRange(targetRow, 16).setValue('å·®ã—æˆ»ã—');
        sheet.getRange(targetRow, 19).setValue(checker);
        sheet.getRange(targetRow, 20).setValue(now);
        sheet.getRange(targetRow, 21).setValue(comment);
        break;
        
      case 'send_to_executive':
        // å½¹å“¡ã¸å›ã™
        sheet.getRange(targetRow, 16).setValue('å½¹å“¡ç¢ºèªå¾…ã¡');
        sheet.getRange(targetRow, 19).setValue(checker);
        sheet.getRange(targetRow, 20).setValue(now);
        sheet.getRange(targetRow, 21).setValue(comment);
        break;
        
      case 'executive_approve':
        // æœ€çµ‚æ‰¿èª
        sheet.getRange(targetRow, 16).setValue('æœ€çµ‚æ‰¿èªæ¸ˆ');
        sheet.getRange(targetRow, 22).setValue(checker);      // executiveApprover
        sheet.getRange(targetRow, 23).setValue(now);          // executiveApprovalDate
        sheet.getRange(targetRow, 24).setValue(comment);      // executiveComment
        break;
        
      case 'executive_reject':
        // å½¹å“¡å´ä¸‹
        sheet.getRange(targetRow, 16).setValue('å´ä¸‹');
        sheet.getRange(targetRow, 22).setValue(checker);
        sheet.getRange(targetRow, 23).setValue(now);
        sheet.getRange(targetRow, 24).setValue(comment);
        break;
    }
    
    return ContentService
      .createTextOutput(JSON.stringify({ 
        success: true, 
        message: 'Check submitted successfully' 
      }))
      .setMimeType(ContentService.MimeType.JSON);
      
  } catch (error) {
    return apiError(error.toString());
  }
}

// ============================================
// API: ç”»åƒã‚’Base64ã§å–å¾—
// ============================================

function apiGetImageBase64(fileId) {
  try {
    const file = DriveApp.getFileById(fileId);
    const blob = file.getBlob();
    const base64 = Utilities.base64Encode(blob.getBytes());
    
    return ContentService
      .createTextOutput(JSON.stringify({ 
        success: true, 
        base64: base64,
        mimeType: blob.getContentType()
      }))
      .setMimeType(ContentService.MimeType.JSON);
      
  } catch (error) {
    return apiError('Failed to get image: ' + error.toString());
  }
}

// ============================================
// API: ã‚¨ãƒ©ãƒ¼ãƒ¬ã‚¹ãƒãƒ³ã‚¹
// ============================================

function apiError(message) {
  return ContentService
    .createTextOutput(JSON.stringify({ 
      success: false, 
      message: message 
    }))
    .setMimeType(ContentService.MimeType.JSON);
}

// ============================================
// ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆæ§‹é€ ã®æ‹¡å¼µ
// ============================================

// ã€é‡è¦ã€‘ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆã«ä»¥ä¸‹ã®åˆ—ã‚’è¿½åŠ ã—ã¦ãã ã•ã„ï¼š
// 
// Qåˆ—: AIè‡ªå‹•ãƒã‚§ãƒƒã‚¯çµæœï¼ˆJSONï¼‰
// Råˆ—: AIæ¤œå‡ºãƒ•ãƒ©ã‚°ï¼ˆOK/WARNING/ERRORï¼‰
// Såˆ—: çµŒç†ãƒã‚§ãƒƒã‚¯æ‹…å½“è€…
// Tåˆ—: çµŒç†ãƒã‚§ãƒƒã‚¯æ—¥æ™‚
// Uåˆ—: çµŒç†ã‚³ãƒ¡ãƒ³ãƒˆ
// Våˆ—: å½¹å“¡æ‰¿èªè€…
// Wåˆ—: å½¹å“¡æ‰¿èªæ—¥æ™‚
// Xåˆ—: å½¹å“¡ã‚³ãƒ¡ãƒ³ãƒˆ
//
// ã¾ãŸã€Påˆ—ï¼ˆæ—§ï¼šçµŒç†ç¢ºèªï¼‰ã‚’ã€Œãƒã‚§ãƒƒã‚¯ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã€ã«å¤‰æ›´
// å€¤: æœªç¢ºèª/çµŒç†æ‰¿èªæ¸ˆ/å·®ã—æˆ»ã—/å½¹å“¡ç¢ºèªå¾…ã¡/æœ€çµ‚æ‰¿èªæ¸ˆ
```

---

### 18. README.md

#### `README.md`
```markdown
# æ¥­å‹™ãƒ„ãƒ¼ãƒ«ç«‹æ›¿ç”³è«‹ - AIè‡ªå‹•ãƒã‚§ãƒƒã‚¯çµ±åˆã‚·ã‚¹ãƒ†ãƒ 

çµŒç†æ‹…å½“è€…ã¨å½¹å“¡ã«ã‚ˆã‚‹äºŒæ®µéšæ‰¿èªãƒ•ãƒ­ãƒ¼ã‚’å®Ÿè£…ã—ãŸç«‹æ›¿ç”³è«‹ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ã§ã™ã€‚Claude APIã«ã‚ˆã‚‹é ˜åæ›¸ã®è‡ªå‹•ãƒã‚§ãƒƒã‚¯æ©Ÿèƒ½ã‚’æ­è¼‰ã—ã¦ã„ã¾ã™ã€‚

## æ©Ÿèƒ½

### âœ… å®Ÿè£…æ¸ˆã¿æ©Ÿèƒ½

- **å·¦å³åˆ†å‰²UI**: ç”³è«‹ä¸€è¦§ï¼ˆå·¦ï¼‰ã¨è©³ç´°ï¼ˆå³ï¼‰ã®ã‚·ãƒ³ãƒ—ãƒ«ãªç”»é¢æ§‹æˆ
- **AIè‡ªå‹•ãƒã‚§ãƒƒã‚¯**: Claude APIã«ã‚ˆã‚‹é ˜åæ›¸ã®è‡ªå‹•èª­ã¿å–ã‚Šãƒ»æ•´åˆæ€§ãƒã‚§ãƒƒã‚¯
- **äºŒæ®µéšæ‰¿èªãƒ•ãƒ­ãƒ¼**:
  - çµŒç†ãƒã‚§ãƒƒã‚¯: åŸºæœ¬çš„ãªæ‰¿èªãƒ»å·®ã—æˆ»ã—
  - å½¹å“¡ç¢ºèª: çµŒç†ãŒè¿·ã£ãŸæ¡ˆä»¶ã®ã¿
- **æœˆåˆ¥è¡¨ç¤º**: å½“æœˆã¾ãŸã¯å‰æœˆã®ç”³è«‹ã®ã¿è¡¨ç¤ºï¼ˆã‚¢ãƒ¼ã‚«ã‚¤ãƒ–ã¯åˆ¥ç”»é¢ï¼‰
- **CSVã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ**: ä¼šè¨ˆã‚½ãƒ•ãƒˆé€£æºç”¨ã®ãƒ‡ãƒ¼ã‚¿å‡ºåŠ›

### ğŸ¯ ä¸»ãªç‰¹å¾´

1. **çµŒç†ã®è² æ‹…è»½æ¸›**: AIãŒè‡ªå‹•ã§é ˜åæ›¸ã‚’èª­ã¿å–ã‚Šã€ä¸ä¸€è‡´ã‚’æ¤œå‡º
2. **ã‚·ãƒ³ãƒ—ãƒ«ãªãƒ•ãƒ­ãƒ¼**: åŸºæœ¬ã¯çµŒç†ã®ã¿ã§å®Œçµã€å¿…è¦ãªæ™‚ã ã‘å½¹å“¡ã¸
3. **æœˆæ¬¡ç®¡ç†**: æœˆã”ã¨ã«ç”³è«‹ã‚’è¡¨ç¤ºã€å¤ã„ç”³è«‹ã¯è‡ªå‹•ã§ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–ã¸

## ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

### 1. ç’°å¢ƒå¤‰æ•°ã®è¨­å®š

```bash
cp .env.local.example .env.local
```

`.env.local` ã‚’ç·¨é›†ï¼š

```env
NEXT_PUBLIC_GAS_API_URL=https://script.google.com/macros/s/YOUR_DEPLOYMENT_ID/exec
ANTHROPIC_API_KEY=sk-ant-xxxxx
```

### 2. ä¾å­˜é–¢ä¿‚ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```bash
npm install
```

### 3. é–‹ç™ºã‚µãƒ¼ãƒãƒ¼ã®èµ·å‹•

```bash
npm run dev
```

http://localhost:3000 ã«ã‚¢ã‚¯ã‚»ã‚¹

### 4. GASå´ã®è¨­å®š

#### ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆã®åˆ—æ§‹æˆ

ç”³è«‹ç®¡ç†ã‚·ãƒ¼ãƒˆã«ä»¥ä¸‹ã®åˆ—ã‚’è¿½åŠ ï¼š

| åˆ— | é …ç›®å | èª¬æ˜ |
|----|--------|------|
| Q | AIè‡ªå‹•ãƒã‚§ãƒƒã‚¯çµæœ | JSONå½¢å¼ |
| R | AIæ¤œå‡ºãƒ•ãƒ©ã‚° | OK/WARNING/ERROR |
| S | çµŒç†ãƒã‚§ãƒƒã‚¯æ‹…å½“è€… | æ°å |
| T | çµŒç†ãƒã‚§ãƒƒã‚¯æ—¥æ™‚ | ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ— |
| U | çµŒç†ã‚³ãƒ¡ãƒ³ãƒˆ | ãƒ†ã‚­ã‚¹ãƒˆ |
| V | å½¹å“¡æ‰¿èªè€… | æ°å |
| W | å½¹å“¡æ‰¿èªæ—¥æ™‚ | ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ— |
| X | å½¹å“¡ã‚³ãƒ¡ãƒ³ãƒˆ | ãƒ†ã‚­ã‚¹ãƒˆ |

ã¾ãŸã€Påˆ—ã‚’ã€ŒçµŒç†ç¢ºèªã€ã‹ã‚‰ã€Œãƒã‚§ãƒƒã‚¯ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã€ã«å¤‰æ›´ã—ã€å€¤ã‚’ä»¥ä¸‹ã«çµ±ä¸€ï¼š
- æœªç¢ºèª
- çµŒç†æ‰¿èªæ¸ˆ
- å·®ã—æˆ»ã—
- å½¹å“¡ç¢ºèªå¾…ã¡
- æœ€çµ‚æ‰¿èªæ¸ˆ

#### GAS code.gsã®æ›´æ–°

æä¾›ã•ã‚ŒãŸ `code.gs` ã®è¿½åŠ ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒšã—ã¦ã€Web Appã¨ã—ã¦å†ãƒ‡ãƒ—ãƒ­ã‚¤ã€‚

## ä½¿ã„æ–¹

### çµŒç†æ‹…å½“è€…

1. å·¦ãƒ‘ãƒãƒ«ã§æœªç¢ºèªã®ç”³è«‹ã‚’é¸æŠ
2. å³ãƒ‘ãƒãƒ«ã§é ˜åæ›¸ã‚’ç¢ºèª
3. AIåˆ¤å®šçµæœã‚’å‚è€ƒã«ãƒã‚§ãƒƒã‚¯
4. å•é¡Œãªã‘ã‚Œã°ã€ŒçµŒç†æ‰¿èªã€
5. è¿·ã£ãŸã‚‰ã€Œå½¹å“¡ã¸å›ã™ã€

### å½¹å“¡

1. ã€Œå½¹å“¡ç¢ºèªå¾…ã¡ã€ã®ç”³è«‹ã‚’é¸æŠ
2. çµŒç†ã®ã‚³ãƒ¡ãƒ³ãƒˆã‚’ç¢ºèª
3. æœ€çµ‚åˆ¤æ–­ã‚’ä¸‹ã™

## æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

- **ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰**: Next.js 15 (App Router)
- **UI**: shadcn/ui + Tailwind CSS
- **AI**: Claude API (Anthropic)
- **ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰**: Google Apps Script
- **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹**: Google Sheets

## ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ 

```
tool-reimbursement-system/
â”œâ”€â”€ app/                  # Next.js App Router
â”‚   â”œâ”€â”€ page.tsx         # ãƒ¡ã‚¤ãƒ³ç”»é¢
â”‚   â””â”€â”€ api/             # APIãƒ«ãƒ¼ãƒˆ
â”œâ”€â”€ components/          # Reactã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â”œâ”€â”€ approval/        # æ‰¿èªç”»é¢ç”¨
â”‚   â”œâ”€â”€ layout/          # ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ
â”‚   â””â”€â”€ shared/          # å…±é€šã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”œâ”€â”€ lib/                 # ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
â”‚   â”œâ”€â”€ types.ts         # å‹å®šç¾©
â”‚   â”œâ”€â”€ gasApi.ts        # GAS APIã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ
â”‚   â””â”€â”€ aiChecker.ts     # AIè‡ªå‹•ãƒã‚§ãƒƒã‚¯
â””â”€â”€ hooks/               # ã‚«ã‚¹ã‚¿ãƒ ãƒ•ãƒƒã‚¯
```

## ãƒ©ã‚¤ã‚»ãƒ³ã‚¹

MIT
```
